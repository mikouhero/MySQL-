# 19| 幻读是什么，幻读有什么问题？

### 说明
在可重复读隔离级别下，普通的查询是快照读，是不会看到别的事务插入的数据的。因此，幻读在“当前读”下才会出现。  
上面 session B 的修改结果，被 session A之后的 select 语句用“当前读”看到，不能称为幻读。幻读仅专指“新插入的行”。

### 幻读有什么问题？
  - 语义被破坏 
  - 其次，是数据一致性的问题
  - 即使把所有的记录都加上锁，还是阻止不了新插入的记录

### 如何解决缓幻读？

现在你知道了，产生幻读的原因是，行锁只能锁住行，但是新插入记录这个动作，要更新的是记录之间的“间隙”。因此，为了解决幻读问题，InnoDB 只好引入新的锁，也就是间隙锁 (Gap lock)

间隙锁和 next-key lock 的引入，帮我们解决了幻读的问题，但同时也带来了一些“困扰”

间隙锁的引入，可能会导致同样的语句锁住更大的范围，这其实是影响了并发度



    
